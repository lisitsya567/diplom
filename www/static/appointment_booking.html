<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/appointment_booking.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
    <title>Запись к врачу</title>


    <script>


        function onDateChange() {
            document.getElementById('booking-form').submit();
        }


    </script>


</head>



<body>







    <div class="wrapper">



        <header class="container">


            <a href="/"><img src="/static/image/logo.png" alt="site logo"></a>



            <nav>
                <ul>
                    <li><a href="/profile">Личный кабинет</a></li>
                    <li><a href="/">Главная</a></li>
                </ul>
            </nav>


        </header>


        <div class="container">


            <div class="appointment-booking">


                <h1>Запись к врачу</h1>

                    <h2>{{ doctor.fname }} {{ doctor.lname }}</h2>

                    <p>Специализация: {{ doctor.specialization }}</p>

                    <p>{{ doctor.title }}</p>


                    <form method="get" id="booking-form">

                        <label>Дата:

                            <input type="date" name="appointment_date" value="{{ selected_date }}" required onchange="onDateChange()">

                        </label>

                    </form>

                    {% if available_slots %}


                    <form method="post">

                        <input type="hidden" name="appointment_date" value="{{ selected_date }}">

                        <label>Время:

                            <select name="appointment_time" required>

                                {% for slot in available_slots %}
                                    <option value="{{ slot.strftime('%H:%M') }}">{{ slot.strftime('%H:%M') }}</option>
                                {% endfor %}

                            </select>

                        </label>

                        <button type="submit">Записаться</button>

                    </form>

                    {% else %}

                        <p>Нет доступных слотов на выбранную дату. Пожалуйста, выберите другую дату.</p>

                    {% endif %}


                </div>


            </div>


        </div>


    </div>



    
</body>
</html> 